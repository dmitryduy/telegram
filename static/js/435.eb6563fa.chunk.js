"use strict";(self.webpackChunktelegram=self.webpackChunktelegram||[]).push([[435],{9435:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var r,o,u,i,l,a,s,c=t(885),d=t(2791),h=t(6871),f=t(1694),v=t.n(f),p=t(9565),m=t(6396),x=t(168),g=t(5751),Z=t(184),C=g.ZP.span(r||(r=(0,x.Z)(["\n  display: block;\n  text-align: center;\n  margin: 10px 0;\n  font-size: ",";\n  color: ",";\n"])),(function(e){return e.theme.fontSizes.normal}),(function(e){return e.theme.colors.paragraph})),j=function(e){var n=e.children;return(0,Z.jsx)(C,{children:n})},y=(0,d.createContext)(null),b=t(7918),k=function(e){var n=e.countries,t=e.hidePopup,r=(0,d.useContext)(y);if(!r)return null;var o=r.setDualCode,u=r.setSelectedCountry,i=r.setPhoneMask,l=(0,d.useMemo)((function(){return n.map((function(e){return(0,Z.jsx)(b.Z,{text:e.name,subtext:"+".concat(e.dualCode),onClick:function(){return function(e){o("+".concat(e.dualCode)),i(e.mask),u(e.name),t()}(e)}},e.name+e.dualCode)}))}),[n]);return l.length?(0,Z.jsx)(Z.Fragment,{children:l}):(0,Z.jsx)(j,{children:"Country not found"})},P=t(6803),S="Country Code",V="Invalid country code",I=/^\+\d{0,4}$/,M=/^[a-zA-Z0-9_]{0,20}$/,w=t(8155),z=t(2051),E=t(4984),T=(0,g.ZP)(E.X)(o||(o=(0,x.Z)(["\n  overflow: auto;\n  height: 55vh;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.bgColor})),F=function(e){var n=e.active,t=e.hidePopup,r=(0,m.Z)("/countries/en").data,o=(0,P.Z)(""),u=(0,c.Z)(o,2),i=u[0],l=u[1],a=(0,d.useContext)(y)||{},s=a.dualCode,h=a.setPhoneMask,f=a.setSelectedCountry;(0,d.useEffect)((function(){if("+"===s)return f(S),void h("");var e=function(e,n){return e.find((function(e){return e.dualCode===n}))}(r||[],s.slice(1));e?(f(e.name),h(e.mask)):(f(V),h(""))}),[s]),(0,d.useEffect)((function(){n||setTimeout((function(){return l("")}),200)}),[n]);var v=(0,d.useMemo)((function(){return function(e,n){return e?e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):[]}(r,i)}),[i,r]);return(0,Z.jsxs)(w.Z,{active:n,hide:t,children:[(0,Z.jsx)(w.Z.Header,{title:"Select Country",children:(0,Z.jsx)(z.Z,{value:i,setValue:l,placeholder:"Search",children:(0,Z.jsx)(z.Z.Search,{searchIcon:!0,timesIcon:!0})})}),(0,Z.jsx)(w.Z.Content,{bordered:!0,children:(0,Z.jsx)(T,{children:r&&(0,Z.jsx)(k,{countries:v,hidePopup:t})})}),(0,Z.jsx)(w.Z.Footer,{cancelTitle:"Close"})]})},N=t(2957),A=g.ZP.div(u||(u=(0,x.Z)(["\n  position: relative;\n  padding: 5px 0;\n  border-bottom: 1px solid ",";\n  cursor: pointer;\n  \n  svg {\n    position: absolute;\n    top: 50%;\n    right: 0;\n    transform: translateY(-50%);\n    fill: ","\n  }\n"])),(function(e){return e.theme.colors.inputBorder}),(function(e){return e.theme.colors.inputColor})),B=d.memo((function(e){var n=e.selectedCountry,t=(0,d.useState)(!1),r=(0,c.Z)(t,2),o=r[0],u=r[1],i=(0,d.useCallback)((function(){u(!1)}),[]);return(0,Z.jsxs)(A,{onClick:function(){u(!0)},children:[N.c.hide,(0,Z.jsx)("span",{children:n}),(0,Z.jsx)(F,{active:o,hidePopup:i})]})})),D=function(e){return/\d/.test(e)},L=function(e){var n=(0,d.useState)(""),t=(0,c.Z)(n,2),r=t[0],o=t[1];return[r,function(n){if("string"!==typeof n){var t=n.target;D(t.value[t.value.length-1])&&!D(e[t.value.length-1])&&(t.value=function(e,n){for(var t=e.slice(0,e.length-1),r=e.length-1;!D(n[r])&&n[r];)t+=n[r],r++;return t+e[e.length-1]}(t.value,e)),function(e,n){if(e.length>n.length)return!1;var t=e.length-1;return!(D(e[t])!==D(n[t])||n[t]!==e[t]&&!D(e[t]))}(t.value,e)&&o(t.value)}else o(n)}]},Y=t(9951),$=t(6457),H=t(1524),R=g.ZP.div(i||(i=(0,x.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  background-color: ",";\n\n  .phone-container {\n    display: flex;\n\n    & > div:first-child {\n      width: 80px;\n      margin-right: 10px;\n    }\n  }\n"])),(function(e){return e.theme.colors.bgColor})),X=g.ZP.h1(l||(l=(0,x.Z)(["\n  font-size: ",";\n  margin-bottom: 5px;\n  color: ",";\n\n"])),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.heading})),_=g.ZP.p(a||(a=(0,x.Z)(["\n  font-size: ",";\n  color: ",";\n  width: 300px;\n  margin-bottom: 20px;\n"])),(function(e){return e.theme.fontSizes.extraNormal}),(function(e){return e.theme.colors.paragraph})),q=g.ZP.div(s||(s=(0,x.Z)(["\n  display: block;\n  margin: 10px 0;\n  height: 15px;\n  font-size: ",";\n  color: ",";\n  visibility: hidden;\n  transition: .2s;\n  opacity: 0;\n\n  &.visible {\n    opacity: 1;\n    visibility: visible;\n  }\n"])),(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.colors.error})),G=function(){var e=(0,p.C)((function(e){return e.user.isAuth})),n=(0,p.C)((function(e){return e.user.backendError})),t=(0,d.useState)(""),r=(0,c.Z)(t,2),o=r[0],u=r[1],i=function(e){var n,t,r,o,u=(0,P.Z)("+",I),i=(0,c.Z)(u,2),l=i[0],a=i[1],s=L(e),d=(0,c.Z)(s,2),h=d[0],f=d[1],v=(0,P.Z)("",M),p=(0,c.Z)(v,2),m=p[0],x=p[1],g=(0,P.Z)(S),Z=(0,c.Z)(g,2),C=Z[0],j=Z[1];return{dualCodeInput:{value:l,setValue:a,errorMessage:""},phoneInput:{value:h,setValue:f,errorMessage:(r=h,o=e,r.length===o.length?"":"Invalid phone number. Please try again.")},nicknameInput:{value:m,setValue:x,errorMessage:(t=m,t.length<3?"Nickname must have 5 more symbols":"")},selectedCountryInput:{value:C,setValue:j,errorMessage:(n=C,n===V||n===S?V:"")}}}(o),l=i.phoneInput,a=i.dualCodeInput,s=i.nicknameInput,f=i.selectedCountryInput,m=function(e,n,t){var r=(0,p.T)();return function(){var o,u;r((0,Y.CS)({userPhone:(o=e.value,u=n.value,(u+o).split("").filter((function(e){return D(e)})).join("")),nickname:t.value})).unwrap().then((function(e){r((0,$.VR)(e.dialogs))}))}}(l,a,s),x=(0,h.s0)(),g=(0,d.useState)(""),C=(0,c.Z)(g,2),j=C[0],b=C[1];return(0,d.useEffect)((function(){e&&x("/")}),[e]),(0,d.useEffect)((function(){n&&b(n)}),[n]),(0,d.useEffect)((function(){b("")}),[l.value,a.value,s.value]),(0,Z.jsx)(y.Provider,{value:{setDualCode:a.setValue,setPhoneMask:u,setSelectedCountry:f.setValue,dualCode:a.value},children:(0,Z.jsx)(R,{children:(0,Z.jsxs)("div",{children:[(0,Z.jsx)(X,{children:"You Phone Number"}),(0,Z.jsx)(_,{children:"Please confirm your country code and enter your mobile phone number."}),(0,Z.jsx)(B,{selectedCountry:f.value}),(0,Z.jsxs)("div",{className:"phone-container",children:[(0,Z.jsx)(z.Z,{value:a.value,setValue:function(e){l.setValue(""),a.setValue(e)},placeholder:"",children:(0,Z.jsx)(z.Z.TextField,{type:"tel"})}),(0,Z.jsx)(z.Z,{value:l.value,setValue:l.setValue,placeholder:o,children:(0,Z.jsx)(z.Z.TextField,{type:"tel"})})]}),(0,Z.jsx)(z.Z,{value:s.value,setValue:s.setValue,placeholder:"Enter your nickname",children:(0,Z.jsx)(z.Z.TextField,{})}),(0,Z.jsx)(q,{className:v()({visible:j}),children:j}),(0,Z.jsx)(H.Z,{onClick:function(){var e=l.errorMessage||f.errorMessage||s.errorMessage;e?b(e):m()},text:"log in",fullButton:!0})]})})})}}}]);
//# sourceMappingURL=435.eb6563fa.chunk.js.map