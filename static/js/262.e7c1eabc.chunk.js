(self.webpackChunktelegram=self.webpackChunktelegram||[]).push([[262],{7262:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Yt}});var r,o,i,a=t(2791),s=t(9565),c=t(4144),l=t(168),u=t(5751),d=u.ZP.div(r||(r=(0,l.Z)(["\n  position: relative;\n  width: 25px;\n  height: 17px;\n  margin-right: 10px;\n  cursor: pointer;\n  &:hover span{\n    background-color: ",";\n  }\n  span {\n    position: absolute;\n    display: inline-block;\n    height: 4px;\n    width: 100%;\n    border-radius: 2px;\n    background-color: ",";\n    &:nth-child(2) {\n      top: 6px;\n    }\n    &:nth-child(3) {\n      top: 13px;\n    }\n  }\n"])),(function(n){return n.theme.colors.hamburgerHover}),(function(n){return n.theme.colors.hamburger})),f=t(184),h=function(){var n=(0,s.T)();return(0,f.jsxs)(d,{onClick:function(){n((0,c.BE)(!0))},children:[(0,f.jsx)("span",{}),(0,f.jsx)("span",{}),(0,f.jsx)("span",{})]})},m=t(885),p=function(){var n=matchMedia("(max-width: 1000px)"),e=(0,a.useState)(n.matches),t=(0,m.Z)(e,2),r=t[0],o=t[1];return(0,a.useLayoutEffect)((function(){var e=function(){return o(n.matches)};return n.addEventListener("change",e),function(){return n.removeEventListener("change",e)}})),r},g=t(6803),x=t(2553),v=t(6457),b=t(6601),w=function(){var n=(0,s.C)((function(n){return n.user.phoneNumber})),e=(0,s.C)((function(n){var e;return null===(e=n.dialog.activeDialog)||void 0===e?void 0:e.phoneNumber})),t=(0,g.Z)(),r=(0,m.Z)(t,2),o=r[0],i=r[1],c=(0,x.Z)(o,500),l=(0,m.Z)(c,1)[0],u=(0,a.useState)(!1),d=(0,m.Z)(u,2),f=d[0],h=d[1],p=(0,a.useState)(!1),w=(0,m.Z)(p,2),j=w[0],Z=w[1],k=(0,s.T)();return(0,a.useEffect)((function(){h(!1),Z(!!o)}),[o]),(0,a.useEffect)((function(){i("")}),[e]),(0,a.useEffect)((function(){l&&n&&(Z(!0),function(n,e){return fetch("".concat(b._,"/users?value=").concat(n,"&userPhone=").concat(e)).then((function(n){return n.json()}))}(l,n).then((function(n){h(!0),Z(!1),k((0,v.Xr)(n))})))}),[l]),{searchDialogs:f,isLoading:j,searchValue:o,setSearchValue:i}};!function(n){n[n.LOADING=0]="LOADING",n[n.SEARCH_DIALOGS=1]="SEARCH_DIALOGS",n[n.USER_DIALOGS=2]="USER_DIALOGS"}(o||(o={}));var j,Z,k,C,y,S,P,N,D=u.ZP.span(i||(i=(0,l.Z)(["\n  height: 50px;\n  width: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background-color: ",";\n  color: #fff;\n"])),(function(n){return n.color})),T=function(n){var e=n.onClick,t=n.image,r=n.style,o=void 0===r?{}:r,i=n.text;return(0,f.jsx)(D,{className:"avatar",onClick:e,style:o,color:t||"",children:i})},E=t(1694),z=t.n(E),M=t(9603),I=function(n){var e=+new Date(n);return new Date(e).getDate()===new Date(Date.now()).getDate()-1?"Yesterday":Date.now()-e<864e5?(0,M.ZP)(n,"HH:MM"):(0,M.ZP)(n,"d.mm.yyyy")},H=u.ZP.li(j||(j=(0,l.Z)(["\n  width: 100%;\n  padding: 10px;\n  display: flex;\n  height: 80px;\n  cursor: pointer;\n  transition: .1s;\n  user-select: none;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &.active {\n    background-color: ",";\n\n    .title, .text, .time {\n      color: #fff;\n    }\n    \n    .unread-count {\n      background-color: #fff;\n      color: ",";\n    }\n  }\n\n  .avatar {\n    position: relative;\n\n    &:before {\n      position: absolute;\n      content: '';\n      border-radius: 50%;\n      width: 13px;\n      height: 13px;\n      bottom: 0;\n      right: 0;\n      border: 2px solid #fff;\n      background-color: ",";\n    }\n  }\n"])),(function(n){return n.theme.colors.chatItemHover}),(function(n){return n.themeColor}),(function(n){return n.themeColor}),(function(n){return n.themeColor})),L=u.ZP.div(Z||(Z=(0,l.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 1px;\n\n  .title {\n    font-weight: 600;\n    font-size: ",";\n    color: ",";\n    margin-bottom: 5px;\n    flex: 1;\n  }\n\n  .text {\n    flex: 1;\n    width: 100%;\n    font-size: ",";\n    color: ",";\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"])),(function(n){return n.theme.fontSizes.extraNormal}),(function(n){return n.theme.colors.heading}),(function(n){return n.theme.fontSizes.extraNormal}),(function(n){return n.theme.colors.paragraph})),O=u.ZP.div(k||(k=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n\n  .time {\n    color: ",";\n    font-size: ",";\n    margin-bottom: 5px;\n  }\n\n  .unread-count {\n    display: flex;\n    justify-content: center;\n    width: fit-content;\n    align-items: center;\n    min-width: 20px;\n    height: 20px;\n    color: #fff;\n    padding: 0 5px;\n    margin-top: 5px;\n    background-color: ",";\n    border-radius: 10px/ 50%;\n    font-size: ",";\n  }\n"])),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.themeColor}),(function(n){return n.theme.fontSizes.small})),A=function(n){var e=n.title,t=n.partnerPhone,r=n.text,o=n.time,i=n.avatarImage,a=n.avatarName,c=n.unreadMessagesCount,l=n.isDialogExisted,u=n.onClick,d=(0,s.C)((function(n){return n.settings.themeColor})),h=(0,s.C)((function(n){var e;return null===(e=n.dialog.activeDialog)||void 0===e?void 0:e.phoneNumber}));return(0,f.jsxs)(H,{onClick:function(){u(t)},themeColor:d,className:z()({active:t===h}),children:[(0,f.jsx)(T,{style:{marginRight:15},image:i,text:a}),(0,f.jsxs)(L,{children:[(0,f.jsx)("h4",{className:"title",children:e}),r&&(0,f.jsx)("div",{className:"text",children:r})]}),l&&(0,f.jsxs)(O,{themeColor:d,className:z()({active:t===h}),children:[o&&(0,f.jsx)("span",{className:"time",children:I(o)}),c&&(0,f.jsx)("span",{className:"unread-count",children:c})]})]})},B=function(n){var e=n.dialogs,t=n.isDialogExisted,r=(0,s.T)(),o=(0,a.useRef)(null),i=(0,s.C)((function(n){var e;return null===(e=n.dialog.activeDialog)||void 0===e?void 0:e.phoneNumber})),c=function(n){var e;i!==n&&(window.emitter.emit("active-dialog-phone:open"),null===(e=o.current)||void 0===e||e.abort(),o.current=r((0,v.rh)({partnerPhone:n})))};return(0,a.useEffect)((function(){window.emitter.on("active-dialog-phone:close",(function(){var n;return null===(n=o.current)||void 0===n?void 0:n.abort()}))}),[]),e?(0,f.jsx)("ul",{children:e.map((function(n){return(0,f.jsx)(A,{title:n.fullName,text:n.lastMessage||"",partnerPhone:n.phoneNumber,avatarName:n.avatarText,avatarImage:n.avatar,time:n.lastMessageDate,unreadMessagesCount:n.unreadMessageCount,isDialogExisted:t,onClick:c},n.phoneNumber)}))}):null},F=u.ZP.div(C||(C=(0,l.Z)(["\n  background-color: ",";\n  padding: 7px 10px;\n  color: ",";\n  font-size: ",";\n"])),(function(n){return n.theme.colors.searchTitle}),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.fontSizes.extraSmall})),R=function(n){var e=n.infoText;return(0,f.jsx)(F,{children:e})},U=function(){var n=(0,s.C)((function(n){return n.dialog.globalSearchResults}));if((null===n||void 0===n||!n.globalDialogs.length)&&(null===n||void 0===n||!n.userDialogs.length))return(0,f.jsx)(R,{infoText:"Not found"});var e=n.userDialogs,t=n.globalDialogs;return(0,f.jsxs)(f.Fragment,{children:[e.length?(0,f.jsx)(B,{dialogs:e,isDialogExisted:!0}):null,t.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(R,{infoText:"Global search results"}),(0,f.jsx)(B,{dialogs:t,isDialogExisted:!1})]}):null]})},G=function(){var n=(0,s.C)((function(n){return n.dialog})).dialogs;return(0,f.jsx)(B,{dialogs:n,isDialogExisted:!0})},_=(0,a.memo)((function(n){switch(n.renderComponent){case o.LOADING:return(0,f.jsx)(R,{infoText:"Searching..."});case o.SEARCH_DIALOGS:return(0,f.jsx)(U,{});case o.USER_DIALOGS:return(0,f.jsx)(G,{})}})),X=function(n,e){return n?o.SEARCH_DIALOGS:e?o.LOADING:o.USER_DIALOGS},V=function(){var n=p(),e=(0,a.useState)(!1),t=(0,m.Z)(e,2),r=t[0],o=t[1];return(0,a.useEffect)((function(){n?(window.emitter.on("active-dialog-phone:open",(function(){return o(!0)})),window.emitter.on("active-dialog-phone:close",(function(){return o(!1)}))):(window.emitter.un("active-dialog-phone:open"),window.emitter.un("active-dialog-phone:close"))}),[n]),r},Y=t(2051),$=t(4984),K=u.ZP.div(y||(y=(0,l.Z)(["\n  height: 100%;\n  width: ",";\n  background-color: ",";\n  border-right: 1px solid  ",";\n  transition: ",";\n  \n  &.move {\n    transform: translateX(-50px);\n  }\n"])),(function(n){return n.isPhone?"100vw":"500px"}),(function(n){return n.theme.colors.bgColor}),(function(n){return n.theme.colors.helpingBorders}),(function(n){return n.theme.other.transitionSpeedSlow})),W=u.ZP.div(S||(S=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  height: 57px;\n"]))),q=(0,u.ZP)($.X)(P||(P=(0,l.Z)(["\n  position: relative;\n  overflow: auto;\n  height: calc(100vh - 57px);\n  overflow-x: hidden;\n"]))),J=function(){var n=w(),e=n.searchValue,t=n.searchDialogs,r=n.isLoading,o=n.setSearchValue,i=p(),a=V();return(0,f.jsxs)(K,{className:z()({move:a}),isPhone:i,children:[(0,f.jsxs)(W,{children:[(0,f.jsx)(h,{}),(0,f.jsx)(Y.Z,{value:e,setValue:o,placeholder:"Search...",children:(0,f.jsx)(Y.Z.Search,{timesIcon:!0,bordered:!0})})]}),(0,f.jsx)(q,{children:(0,f.jsx)(_,{renderComponent:X(t,r)})})]})},Q=function(n,e){return!e||n.sender!==e.sender},nn=function(n,e,t){return!!n&&e-n===t},en=t(5560),tn=["title","titleId"];function rn(){return rn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rn.apply(this,arguments)}function on(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function an(n,e){var t=n.title,r=n.titleId,o=on(n,tn);return a.createElement("svg",rn({xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 312 511.42",ref:e,"aria-labelledby":r},o),t?a.createElement("title",{id:r},t):null,N||(N=a.createElement("path",{fillRule:"nonzero",d:"M35.54 0 312 252.82 29.84 511.42 0 478.8l246.54-225.94L5.7 32.62z"})))}var sn,cn,ln,un,dn,fn,hn,mn,pn=a.forwardRef(an),gn=(t.p,function(n){return n?"+ ".concat(n[0]," ").concat(n.slice(1,4)," ").concat(n.slice(4,7)," ").concat(n.slice(7)):""}),xn=u.ZP.div(sn||(sn=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 45px;\n  background-color: ",";\n  padding: 5px 10px;\n  border-bottom: 1px solid ",";\n  border-radius: 0 0 10px 10px;\n  \n  .back-icon {\n    width: 20px;\n    height: 20px;\n    margin-right: 20px;\n    fill: ",";\n    transform: rotate(180deg);\n  }\n  .main-info {\n    display: flex;\n    flex-direction: column;\n  }\n\n  h5 {\n    font-size: ",";\n    color: ",";\n    font-weight: 600;\n  }\n\n  span {\n    color: ",";\n    font-size: ",";\n  }\n"])),(function(n){return n.theme.colors.bgColor}),(function(n){return n.theme.colors.helpingBorders}),(function(n){return n.theme.colors.icons}),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.theme.colors.heading}),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.fontSizes.extraSmall})),vn=864e5,bn=function(n){var e=Date.now();return e-n<6e4?"recently":e-n<vn&&new Date(n).getDate()===new Date(e).getDate()?(0,M.ZP)(n,"HH:MM"):e-n<vn&&new Date(n).getDate()!==new Date(e).getDate()?"yesterday at "+(0,M.ZP)(n,"HH:MM"):(0,M.ZP)(n,"dd.mm.yyyy")},wn=function(){var n=(0,s.C)((function(n){return n.dialog.isActiveDialogLoaded})),e=(0,s.C)((function(n){return n.dialog.activeDialog})),t=e.phoneNumber,r=e.isOnline,o=e.lastSeen,i=p(),a=(0,s.T)();return(0,f.jsxs)(xn,{children:[i&&(0,f.jsx)(pn,{className:"back-icon",onClick:function(){window.emitter.emit("active-dialog-phone:close"),a((0,v.BT)())}}),(0,f.jsxs)("div",{className:"main-info",children:[(0,f.jsx)("h5",{children:gn(t)}),n&&(0,f.jsx)("span",{children:"Waiting for network..."}),!n&&(0,f.jsx)("span",{children:r?"Online":"last seen ".concat(bn(o||0))})]})]})},jn=(0,t(8754).ZP)(b._||""),Zn=function(n){return{on:function(e){jn.on(n,(function(n){e(n)}))},off:function(){jn.off(n)},emit:function(e){jn.emit(n,e)}}},kn=u.ZP.div(cn||(cn=(0,l.Z)(["\n  display: flex;\n  padding: 5px 10px;\n  align-items: center;\n  width: 100%;\n  background-color: ",";\n  border-radius: 10px 10px 0 0;\n\n  .send-button {\n    clip-path: polygon(9% 44%, 0 0, 100% 50%, 0 100%, 9% 51%, 63% 51%, 63% 44%);\n    background-color: ",";\n    width: 30px;\n    height: 30px;\n    outline: none;\n    border: none;\n    cursor: pointer;\n    opacity: 0;\n    visibility: hidden;\n    transform: scale(0);\n    margin-bottom: 6px;\n    transition: .1s linear;\n    align-self: flex-end;\n    margin-left: 10px;\n\n    &.show {\n      opacity: 1;\n      visibility: visible;\n      transform: scale(1);\n    }\n  }\n"])),(function(n){return n.theme.colors.bgColor}),(function(n){return n.theme.colors.blue})),Cn=function(n){var e=n.scrollToBottomIsNeeded,t=(0,g.Z)(),r=(0,m.Z)(t,3),o=r[0],i=r[1],a=r[2],c=(0,s.C)((function(n){return n.dialog.activeDialog})),l=(0,s.C)((function(n){return n.settings})).sendHotkey,u=(0,s.T)(),d=Zn("send message"),h=(0,s.C)((function(n){return n.user.phoneNumber})),p=function(){if(o.trim()&&h){var n={sender:"user",createdDate:Date.now(),text:o};u((0,v.Hz)(n)),d.emit({senderPhone:h,receiverPhone:null===c||void 0===c?void 0:c.phoneNumber,text:n.text,createdDate:n.createdDate}),a(),setTimeout((function(){return e(!0)}))}};return(0,f.jsxs)(kn,{children:[(0,f.jsx)(Y.Z,{value:o,setValue:i,placeholder:"Write a message...",onKeyUp:function(n){"enter"===l&&"Enter"===n.key&&p(),"ctrl-enter"===l&&"Enter"===n.key&&n.ctrlKey&&p()},children:(0,f.jsx)(Y.Z.TextArea,{onHeightUpdate:e,maxLines:5})}),(0,f.jsx)("button",{onClick:p,className:z()("send-button",{show:o})})]})},yn=u.ZP.div(ln||(ln=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 5px 0;\n"]))),Sn=u.ZP.div(un||(un=(0,l.Z)(["\n  max-width: min(90%, 500px);\n  padding: 7px 10px;\n  border-radius: 7px;\n  position: relative;\n\n  .text {\n    color: ",";\n    font-size: ",";\n    word-break: break-all;\n  }\n\n  .date {\n    font-size: ",";\n    color: ",";\n    transform: translateY(7px);\n    margin-left: 5px;\n    float: right;\n  }\n\n  &::before {\n    position: absolute;\n    content: '';\n    width: 20px;\n    height: 20px;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    bottom: 0;\n  }\n\n  &.user {\n    margin-left: auto;\n    background-color: ",";\n    margin-right: 7px;\n    ","\n  }\n\n  &.partner {\n    background-color: ",";\n    margin-left: 7px;\n    ","\n\n  }\n"])),(function(n){return n.theme.colors.heading}),(function(n){return n.theme.fontSizes.medium}),(function(n){return n.theme.fontSizes.small}),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.colors.userMessage}),(function(n){return n.decorate&&(0,u.iv)(dn||(dn=(0,l.Z)(["\n      &::before {\n        border-bottom: 12px solid ",";\n        right: -7px;\n      }\n    "])),(function(n){return n.theme.colors.userMessage}))}),(function(n){return n.theme.colors.partnerMessage}),(function(n){return n.decorate&&(0,u.iv)(fn||(fn=(0,l.Z)(["\n      &::before {\n        border-bottom: 12px solid ",";\n        left: -7px;\n      }\n    "])),(function(n){return n.theme.colors.partnerMessage}))})),Pn=t(3587),Nn=u.ZP.span(hn||(hn=(0,l.Z)(["\n  position: sticky;\n  top: 0;\n  align-self: center;\n  color: #fff;\n  border-radius: 10px;\n  background-color: ",";\n  padding: 4px 7px;\n  width: 10%;\n  min-width: 100px;\n  text-align: center;\n  font-size: ",";\n  z-index: 999;\n"])),(function(n){return(0,Pn.m4)(n.theme.colors.dateBackground,.5)}),(function(n){return n.theme.fontSizes.normal})),Dn=function(n){var e=n.timestamp;return(0,f.jsx)(Nn,{children:(0,M.ZP)(e,"mmmm d")})},Tn=u.ZP.div(mn||(mn=(0,l.Z)(["\n  width: calc(100% + 40px);\n  transform: translateX(-20px);\n  padding: 5px 0;\n  text-align: center;\n  color: ",";\n  background-color: ",";\n  font-weight: 500;\n  margin: 5px 0;\n  position: relative;\n"])),(function(n){return n.theme.colors.unreadText}),(function(n){return n.theme.colors.unreadTitle})),En=function(){return(0,f.jsx)(Tn,{children:"Unread messages"})},zn=function n(e){var t=e.text,r=e.date,o=e.sender,i=e.isLastMessageByUser,a=e.isDateTooltip,s=e.isUnreadTooltip;return(0,f.jsxs)(f.Fragment,{children:[a&&(0,f.jsx)(n.DateTooltip,{timestamp:r}),s&&(0,f.jsx)(n.UnreadTooltip,{}),(0,f.jsx)(yn,{children:(0,f.jsxs)(Sn,{decorate:i,className:z()({user:"user"===o,partner:"partner"===o}),children:[(0,f.jsx)("span",{className:"text",children:t}),(0,f.jsx)("span",{className:"date",children:(0,M.ZP)(r,"HH:MM")})]})})]})};zn.DateTooltip=Dn,zn.UnreadTooltip=En;var Mn,In,Hn,Ln,On,An,Bn,Fn,Rn,Un,Gn,_n,Xn,Vn,Yn,$n,Kn,Wn,qn,Jn,Qn,ne,ee,te,re,oe,ie,ae,se,ce,le,ue,de,fe,he,me,pe=zn,ge=u.ZP.div(Mn||(Mn=(0,l.Z)(["\n  font-size: 5px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-top: 1.1em solid rgba(255, 255, 255, 0.2);\n  border-right: 1.1em solid rgba(255, 255, 255, 0.2);\n  border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);\n  border-left: 1.1em solid #ffffff;\n  animation: load 1.1s infinite linear;\n\n  &, &:after {\n    border-radius: 50%;\n    width: 10em;\n    height: 10em;\n  }\n\n  @keyframes load {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),xe=function(){return(0,f.jsx)(ge,{})},ve=u.ZP.div(In||(In=(0,l.Z)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: flex-end;\n  overflow: hidden;\n"]))),be=(0,u.ZP)($.X)(Hn||(Hn=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px 20px;\n  overflow: auto;\n  overflow-x: hidden;\n"]))),we=function(){var n=(0,s.C)((function(n){return n.dialog.activeDialog})),e=(0,s.C)((function(n){return n.dialog.isActiveDialogLoaded})),t=(0,a.useRef)(null),r=(0,a.useRef)(!0),o=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.current&&(n||r.current)){if(e)return void t.current.scrollTo({top:t.current.scrollHeight,behavior:"smooth"});t.current.scrollTop=t.current.scrollHeight}};(0,a.useEffect)((function(){return o()}),[null===n||void 0===n?void 0:n.messages]),(0,a.useLayoutEffect)((function(){return o(!0,!1)}),[null===n||void 0===n?void 0:n.phoneNumber,e]);var i=(0,a.useCallback)((function(){var n;t.current&&(n=t.current).scrollHeight-n.scrollTop===n.clientHeight?r.current=!0:(r.current,r.current=!1)}),[]);return(0,en.O)("scroll",i,t),(0,f.jsxs)(f.Fragment,{children:[n&&(0,f.jsx)(wn,{}),e?(0,f.jsx)(xe,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ve,{children:(0,f.jsx)(be,{ref:t,children:null===n||void 0===n?void 0:n.messages.map((function(e,t,r){return(0,f.jsx)(pe,{text:e.text,date:e.createdDate,sender:e.sender,isDateTooltip:(o=r[t-1],i=e,!o||new Date(o.createdDate).getDate()!==new Date(i.createdDate).getDate()||i.createdDate-o.createdDate>864e5),isUnreadTooltip:nn(null===n||void 0===n?void 0:n.unreadMessageCount,r.length,t),isLastMessageByUser:Q(e,e[t+1])},e.createdDate+e.sender);var o,i}))})}),(0,f.jsx)(Cn,{scrollToBottomIsNeeded:o})]})]})},je=u.ZP.div(Ln||(Ln=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  position: relative;\n  height: 100%;\n  transition: ",";\n  &.isMove {\n    transform: translateX(-100vw);\n  }\n"])),(function(n){return n.theme.other.transitionSpeedSlow})),Ze=u.ZP.img(On||(On=(0,l.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  z-index: -1;\n"]))),ke=u.ZP.span(An||(An=(0,l.Z)(["\n  margin: auto;\n  color: #fff;\n  font-size: ",";\n  padding: 5px;\n  background-color: ",";\n  border-radius: 10px;\n"])),(function(n){return n.theme.fontSizes.normal}),(function(n){return(0,Pn.m4)(n.theme.colors.bgColor,.2)})),Ce=function(){var n=(0,s.C)((function(n){return n.settings.backgroundImage})),e=(0,s.C)((function(n){var e;return null===(e=n.dialog.activeDialog)||void 0===e?void 0:e.messages})),t=(0,s.C)((function(n){return n.dialog.isActiveDialogLoaded})),r=V();return(0,f.jsxs)(je,{className:z()({isMove:r}),children:[(0,f.jsx)(Ze,{src:"".concat(b._,"/images/backgrounds/").concat(n,".webp")}),e||t?(0,f.jsx)(we,{}):(0,f.jsx)(ke,{children:"Select a chat to start messaging"})]})},ye=t(4942),Se=t(4925),Pe=t(5395),Ne=function(n,e,t){return e?"".concat(e," ").concat(t||""):n},De=u.ZP.div(Bn||(Bn=(0,l.Z)(["\n  display: flex;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n  margin-bottom: 5px;\n  &.avatar-top {\n    flex-direction: column;\n\n    .avatar {\n      margin-bottom: 10px;\n    }\n  }\n\n  &.avatar-left {\n    align-items: center;\n\n    .avatar {\n      margin-right: 20px;\n    }\n  }\n  \n  .info.center {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n  }\n  .name {\n    color: ",";\n    font-size: ",";\n    margin-bottom: 5px;\n  }\n\n  .phone {\n    font-size: ",";\n    color: ",";\n    font-weight: 500;\n  }\n\n  .nickname {\n    position: relative;\n    color: ",";\n    font-size: ",';\n    cursor: pointer;\n\n    &:hover {\n      &:before {\n        position: absolute;\n        content: "";\n        background-color: ',";\n        bottom: 0;\n        height: .5px;\n        width: 100%;\n      }\n    }\n  }\n"])),(function(n){return n.theme.colors.helpingBorders}),(function(n){return n.theme.colors.bgColor}),(function(n){return n.theme.colors.heading}),(function(n){return n.theme.fontSizes.medium}),(function(n){return n.theme.fontSizes.extraSmall}),(function(n){return n.theme.colors.heading}),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.theme.colors.paragraph})),Te=["textPosition"],Ee=function(n){var e=n.textPosition,t=void 0===e?"":e,r=(0,Se.Z)(n,Te),o=(0,s.C)((function(n){return n.user})),i=o.avatar,a=o.name,c=o.surname,l=o.phoneNumber,u=o.nickname;return(0,f.jsxs)(De,{style:r.styleContainer,className:r.avatarPos,children:[(0,f.jsx)(T,{style:r.styleAvatar,onClick:r.onAvatarClick||Pe.Z,image:i,text:Ne(a||"",c||"",u||"")}),(0,f.jsxs)("div",{className:z()((0,ye.Z)({info:!0},t,!0)),children:[(0,f.jsx)("h4",{className:"name",onClick:r.onNameClick||Pe.Z,children:a?"".concat(a," ").concat(c):"Please, enter name"}),r.phone&&(0,f.jsx)("p",{className:"phone",onClick:r.onPhoneClick||Pe.Z,children:gn(l)}),r.nickname&&(0,f.jsxs)("span",{className:"nickname",onClick:r.onNicknameClick||Pe.Z,children:["@",u]})]})]})},ze=function(n){return window.emitter.emit(n+"-popup:open")},Me=u.ZP.span(Fn||(Fn=(0,l.Z)(["\n  position: relative;\n  display: inline-block;\n  width: 24px;\n  height: 16px;\n  margin-left: auto;\n  background-color: ",";\n  border-radius: 10px;\n\n  &:after {\n    content: '';\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    top: -2px;\n    left: calc(-10px + 2px);\n    border-radius: 50%;\n    background-color: ",";\n    border: 2px solid ",";\n    transition: ",";\n  }\n\n  &.night-mode {\n    background-color: ",";\n    &:after {\n      left: calc(24px - 2px - 10px);\n      border: 2px solid  ",";\n    }\n  }\n"])),(function(n){return n.theme.colors.switcher}),(function(n){return n.theme.colors.switcherTumbler}),(function(n){return n.theme.colors.switcher}),(function(n){return n.theme.other.transitionSpeed}),(function(n){return n.color}),(function(n){return n.color})),Ie=function(){var n=(0,s.C)((function(n){return n.settings})).isNightMode,e=(0,s.C)((function(n){return n.settings})).themeColor,t=(0,s.T)();return(0,a.useEffect)((function(){var e=window.storage.get("night-mode");e&&n!==e&&t((0,c.Fc)())}),[]),(0,a.useEffect)((function(){window.storage.set("night-mode",n)}),[n]),(0,f.jsx)(Me,{color:e,className:z()({"night-mode":n})})},He=t(7918),Le=function(n){var e=n.imageName,r=(0,a.useState)(""),o=(0,m.Z)(r,2),i=o[0],s=o[1];return(0,a.useEffect)((function(){t(2118)("./".concat(e,".png")).then((function(n){return s(n.default)}))}),[]),(0,f.jsx)("img",{width:24,height:24,src:i,style:{borderRadius:7},alt:e})},Oe=u.ZP.div(Rn||(Rn=(0,l.Z)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, .5);\n  z-index: 1000;\n  visibility: hidden;\n  opacity: 0;\n  transition: ",";\n\n  &.active {\n    visibility: visible;\n    opacity: 1;\n  }\n"])),(function(n){return n.theme.other.transitionSpeed})),Ae=u.ZP.div(Un||(Un=(0,l.Z)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  background-color: ",";\n  width: 250px;\n  transition: ",";\n  transform: translateX(-100%);\n  z-index: 10000;\n  box-shadow: 4px 0 8px 0 rgba(34, 60, 80, 0.2);\n  border-radius: 5px;\n\n  &.active {\n    transform: translateX(0);\n  }\n"])),(function(n){return n.theme.colors.bgColor}),(function(n){return n.theme.other.transitionSpeed})),Be=u.ZP.div(Gn||(Gn=(0,l.Z)(["\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  width: 100%;\n  color: #fff;\n"]))),Fe=function(){var n=(0,s.C)((function(n){return n.settings})),e=n.isShowSettings,t=n.backgroundImage,r=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Oe,{className:e?"active":"",onClick:function(){r((0,c.BE)(!1))}}),(0,f.jsxs)(Ae,{className:e?"active":"",children:[(0,f.jsx)(Be,{backgroundImage:t,children:(0,f.jsx)(Ee,{avatarPos:"avatar-top",styleContainer:{padding:"20px 25px 10px"},phone:!0})}),[{text:"Settings",imgName:"settings",type:"extra-settings"},{text:"Night Mode",imgName:"night-mode",type:"night-mode"}].map((function(n){return(0,f.jsx)(He.Z,{text:n.text,leftElement:(0,f.jsx)(Le,{imageName:n.imgName}),rightElement:"night-mode"===n.type?(0,f.jsx)(Ie,{}):null,onClick:function(){return"night-mode"===n.type?void r((0,c.Fc)()):ze(n.type)}},n.text)}))]})]})},Re=t(9951),Ue=u.ZP.div(_n||(_n=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n  box-shadow: 0 5px 6px -3px rgba(34, 60, 80, 0.22);\n  padding: 0 "," 10px;\n  position: relative;\n  z-index: 1;\n  textarea {\n    height: 60px;\n    width: 100%;\n  }\n"])),(function(n){return n.theme.other.popupPaddings})),Ge=u.ZP.span(Xn||(Xn=(0,l.Z)(["\n  width: 25px;\n  text-align: right;\n  font-size: ",";\n  color: ",";\n"])),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.theme.colors.paragraph})),_e=function(){var n=(0,s.C)((function(n){return n.user.bio})),e=(0,g.Z)(n||""),t=(0,m.Z)(e,2),r=t[0],o=t[1],i=(0,s.T)();return(0,f.jsxs)(Ue,{children:[(0,f.jsx)(Y.Z,{setValue:function(n){70<n.target.value.length||o(n)},value:r,placeholder:"Bio",children:(0,f.jsx)(Y.Z.TextArea,{onBlur:function(){i((0,Re.Xp)(r)),i((0,Re.rl)()).unwrap().then((function(){return window.emitter.emit("tooltip:show",{value:"Bio updated."})})).catch((function(n){return window.emitter.emit("tooltip:show",{value:n})}))},onHeightUpdate:function(){return window.emitter.emit("popup:resize")}})}),(0,f.jsx)(Ge,{children:70-r.length})]})},Xe=function(){var n=(0,s.C)((function(n){return n.user})),e=n.name,t=n.surname,r=n.nickname;return{fullName:"".concat(e||""," ").concat(t||""),nickname:"@".concat(r)}},Ve=u.ZP.div(Vn||(Vn=(0,l.Z)(["\n  display: flex;\n  width: 200%;\n  transition: ",";\n  &.right {\n    transform: translateX(-50%);\n  }\n"])),(function(n){return n.theme.other.transitionSpeed})),Ye=u.ZP.div(Yn||(Yn=(0,l.Z)(["\n  background-color: ",";\n  padding: 5px 0;\n"])),(function(n){return n.theme.colors.bgColor})),$e=u.ZP.div($n||($n=(0,l.Z)(["\n  width: 50%;\n  &.hide {\n    max-height: 0;\n  }\n"]))),Ke=u.ZP.div(Kn||(Kn=(0,l.Z)(["\n  width: 50%;\n"]))),We=u.ZP.div(Wn||(Wn=(0,l.Z)(["\n  background-color: ",";\n  .input-container {\n    border-bottom: none;\n  }\n"])),(function(n){return n.theme.colors.bgColor})),qe=u.ZP.p(qn||(qn=(0,l.Z)(["\n  color: ",";\n  padding: 5px "," 10px;\n  font-size: ",";\n  background-color: ",";\n"])),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.other.popupPaddings}),(function(n){return n.theme.fontSizes.extraSmall}),(function(n){return n.theme.colors.popupBg})),Je=function(){var n=Xe(),e=n.fullName,t=n.nickname;return(0,f.jsxs)(We,{children:[(0,f.jsx)(Ee,{textPosition:"center",styleAvatar:{width:100,height:100,fontSize:40},styleContainer:{alignItems:"center",borderBottom:"none",marginBottom:10},avatarPos:"avatar-top"}),(0,f.jsx)(_e,{}),(0,f.jsx)(qe,{children:"Any details such as age, occupation. or city. Example: 23 y.o designer from San Francisco"}),(0,f.jsxs)(Ye,{children:[(0,f.jsx)(He.Z,{text:"Name",leftElement:(0,f.jsx)(Le,{imageName:"name"}),onClick:function(){return ze("name")},rightElement:e}),(0,f.jsx)(He.Z,{text:"Username",leftElement:(0,f.jsx)(Le,{imageName:"nickname"}),onClick:function(){return ze("nickname")},rightElement:t})]})]})},Qe=u.ZP.div(Jn||(Jn=(0,l.Z)(["\n  padding: 10px ",";\n  background-color: ",";\n"])),(function(n){return n.theme.other.popupPaddings}),(function(n){return n.theme.colors.bgColor})),nt=u.ZP.h4(Qn||(Qn=(0,l.Z)(["\n  display: inline-block;\n  font-size: ",";\n  font-weight: 600;\n  margin-bottom: 20px;\n  transform: ",";\n"])),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.theme.other.transitionSpeed})),et=function(n){var e=n.title,t=(0,s.C)((function(n){return n.settings})).themeColor;return(0,f.jsx)(nt,{style:{color:t},children:e})},tt=t(4631),rt=u.ZP.div(ne||(ne=(0,l.Z)(["\n  position: relative;\n  border-radius: 5px;\n  height: 115px;\n  width: 80px;\n  margin-bottom: 5px;\n  cursor: pointer;\n\n  &:before, &:after {\n    position: absolute;\n    content: '';\n    width: 40px;\n    height: 15px;\n    border-radius: 2px;\n  }\n\n  &:before {\n    background-color: ",";\n    top: 15px;\n    left: 5px;\n  }\n\n  &:after {\n    background-color: ",";\n    top: 35px;\n    right: 5px;\n  }\n  // radiobutton\n  label {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 15px;\n  }\n"])),(function(n){return n.beforeColor}),(function(n){return n.afterColor})),ot=u.ZP.span(ee||(ee=(0,l.Z)(["\n  cursor: pointer;\n  text-align: center;\n  font-size: ",";\n  color: ",";\n  transform: ",";\n"])),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.other.transitionSpeed})),it=function(n){var e=n.myMessageColor,t=n.partnerMessageColor,r=n.bgColor,o=n.nameColor,i=n.children,a=n.onClick,s=n.name;return(0,f.jsxs)(tt.E,{direction:"column",children:[(0,f.jsx)(rt,{style:{backgroundColor:r},beforeColor:t,afterColor:e,onClick:a,children:i}),(0,f.jsx)(ot,{style:{color:o},children:s})]})},at=u.ZP.label(te||(te=(0,l.Z)(["\n  display: inline-block;\n  position: relative;\n  width: 26px;\n  height: 26px;\n  border-radius: 50%;\n  border: 2px solid ",";\n  &:before {\n    position: absolute;\n    content: '';\n    width: 26px;\n    height: 26px;\n    left: -2px;\n    top: -2px;\n    background-color: ",";\n    border-radius: 50%;\n    transform: scale(0);\n    transition: ",";\n  }\n\n  &.active {\n    &:before {\n      transform: scale(0.6);\n    }\n  }\n  &.filled {\n    border: 3px solid ",";\n    &:before {\n      transform: scale(1);\n      left: -3px;\n      top: -3px;\n    }\n  }\n  &.filled.active {\n    &:before {\n      transform: scale(0.5);\n    }\n  }\n\n\n"])),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.theme.other.transitionSpeedSlow}),(function(n){return n.color})),st=u.ZP.input(re||(re=(0,l.Z)(["\n  width: 0;\n  height: 0;\n  visibility: hidden;\n"]))),ct=function(n){var e=n.checked,t=n.value,r=n.color,o=void 0===r?"#fff":r,i=n.filled,a=void 0!==i&&i,s=n.onChange;return(0,f.jsx)(at,{color:o,className:z()({active:e,filled:a,radiobutton:!0}),htmlFor:t,children:(0,f.jsx)(st,{type:"radio",id:t,value:t,checked:e,onChange:s})})},lt=["#40a7e3","#45bce7","#52b440","#d46c99","#df8a49","#9978c8","#c55245","#687b98","#dea922"],ut=function(){var n=(0,s.C)((function(n){return n.settings})).isNightMode,e=(0,a.useState)(n?"dark":"light"),t=(0,m.Z)(e,2),r=t[0],o=t[1],i=(0,s.C)((function(n){return n.settings})).themeColor,l=(0,a.useState)(i),u=(0,m.Z)(l,2),d=u[0],h=u[1],p=(0,s.T)(),g=function(n){h(n.target.value),p((0,c.gw)(n.target.value)),window.storage.set("theme-color",n.target.value)};return(0,a.useEffect)((function(){n&&"dark"!==r?o("dark"):n||"light"===r||o("light")}),[n]),(0,f.jsxs)(Qe,{children:[(0,f.jsx)(et,{title:"Themes"}),(0,f.jsxs)(tt.E,{justify:"space-between",marginBottom:"10px",children:[(0,f.jsx)(it,{nameColor:"light"===r?i:void 0,name:"Classic",bgColor:"#9bd494",myMessageColor:"#ffffff",partnerMessageColor:"#ffffff",onClick:function(){o("light"),p((0,c.Fc)(!1))},children:(0,f.jsx)(ct,{value:"light",checked:"light"===r,onChange:function(){return o("light")}})}),(0,f.jsx)(it,{nameColor:"dark"===r?i:void 0,name:"Night",bgColor:"#485761",myMessageColor:"#5ca8d4",partnerMessageColor:"#6b818d",onClick:function(){o("dark"),p((0,c.Fc)(!0))},children:(0,f.jsx)(ct,{value:"dark",checked:"dark"===r,onChange:function(){return o("dark")}})}),(0,f.jsx)(it,{name:"Soon...",bgColor:"#7ec4ea",myMessageColor:"#d7f0ff",partnerMessageColor:"#ffffff",onClick:Pe.Z}),(0,f.jsx)(it,{name:"Soon...",bgColor:"#485761",myMessageColor:"#6b808d",partnerMessageColor:"#6b808d",onClick:Pe.Z})]}),(0,f.jsx)(tt.E,{justify:"space-between",children:lt.map((function(n){return(0,f.jsx)(ct,{color:n,checked:n===d,value:n,onChange:g,filled:!0},n)}))})]})},dt=t(3890),ft=function(n){return"".concat((0,dt.T)(),"/images/backgrounds/").concat(n,".webp")},ht=u.ZP.p(oe||(oe=(0,l.Z)(["\n  margin-left: auto;\n  font-size: ",";\n  font-weight: 400;\n  transform: ",";\n  cursor: pointer;\n"])),(function(n){return n.theme.fontSizes.normal}),(function(n){return n.theme.other.transitionSpeed})),mt=function(n){var e=n.text,t=n.onClick,r=(0,s.C)((function(n){return n.settings})).themeColor;return(0,f.jsx)(ht,{className:"themed-text",style:{color:r},onClick:t||Pe.Z,children:e})},pt=u.ZP.img(ie||(ie=(0,l.Z)(["\nbackground-size: cover;\n  margin-right: 20px;\n  border-radius: 5px;\n"]))),gt=u.ZP.div(ae||(ae=(0,l.Z)(["\n  .themed-text {\n    cursor: pointer;\n    &:first-child {\n      margin-bottom: 15px;\n    }\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"]))),xt=function(){var n=(0,s.C)((function(n){return n.settings})).backgroundImage;return(0,f.jsxs)(Qe,{children:[(0,f.jsx)(et,{title:"Chat background"}),(0,f.jsxs)(tt.E,{children:[(0,f.jsx)(pt,{width:80,height:80,src:ft(n),alt:"background"}),(0,f.jsxs)(gt,{children:[(0,f.jsx)(mt,{text:"Choose from gallery",onClick:function(){return ze("background")}}),(0,f.jsx)(mt,{text:"Choose from file"})]})]})]})},vt=u.ZP.ul(se||(se=(0,l.Z)(["\n\n  li:first-child {\n    margin-bottom: 10px;\n  }\n\n  p {\n    padding-left: 20px;\n\n  }\n  .themed-text {\n    margin-left: 0;\n  }\n"]))),bt=function(){var n=(0,s.C)((function(n){return n.settings})),e=n.themeColor,t=n.sendHotkey,r=(0,s.T)(),o=function(n){n!==t&&(window.storage.set("send-hotkey",n),r((0,c.ab)(n)))};return(0,f.jsxs)(Qe,{children:[(0,f.jsx)(et,{title:"Messages"}),(0,f.jsxs)(vt,{children:[(0,f.jsxs)(tt.E,{as:"li",alignItems:"center",children:[(0,f.jsx)(ct,{color:e,checked:"enter"===t,value:"enter",onChange:function(){return o("enter")}}),(0,f.jsx)(mt,{text:"Send with Enter",onClick:function(){return o("enter")}})]}),(0,f.jsxs)(tt.E,{as:"li",alignItems:"center",children:[(0,f.jsx)(ct,{color:e,checked:"ctrl-enter"===t,value:"ctrl-enter",onChange:function(){return o("ctrl-enter")}}),(0,f.jsx)(mt,{text:"Send with Ctrl+Enter",onClick:function(){return o("ctrl-enter")}})]})]})]})},wt=function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ut,{}),(0,f.jsx)(xt,{}),(0,f.jsx)(bt,{})]})},jt=!0,Zt=function(n){var e,t,r;jt&&(jt=!1,setTimeout((function(){return jt=!0}),4e3),(e="@"+n)&&navigator.clipboard.writeText(e).then((function(){return window.emitter.emit("tooltip:show",{value:t||"Link copied to clipboard."})})).catch((function(){return window.emitter.emit("copy:show",{value:r||"Cannot copy."})})))},kt=function(n,e,t){var r=(0,a.useState)(!1),o=(0,m.Z)(r,2),i=o[0],s=o[1];return(0,a.useEffect)((function(){return window.emitter.on("".concat(n,"-popup:open"),(function(){e&&e(),s(!0)})),window.emitter.on("".concat(n,"-popup:hide"),(function(){t&&t(),s(!1)})),function(){window.emitter.un("".concat(n,"-popup:open")),window.emitter.un("".concat(n,"-popup:hide"))}}),[]),[i,s,"".concat(n,"-popup:hide")]},Ct=u.ZP.div(ce||(ce=(0,l.Z)(["\n  transition: ",";\n  &.hide {\n    max-height: 0;\n    visibility: hidden;\n    opacity: 0;\n  }\n"])),(function(n){return n.theme.other.transitionSpeed})),yt=function(n){var e=n.hide,t=n.children;return(0,f.jsx)(Ct,{className:z()({hide:e}),children:t})},St=t(8155),Pt={"edit-profile":"Info","chat-settings":"Chat settings"},Nt=function(){var n=(0,s.T)(),e=(0,a.useState)("left"),t=(0,m.Z)(e,2),r=t[0],o=t[1],i=(0,a.useState)(""),l=(0,m.Z)(i,2),u=l[0],d=l[1],h=(0,a.useRef)(null),p=(0,a.useRef)(null),g=(0,s.C)((function(n){return n.user.nickname})),x=kt("extra-settings",(function(){n((0,c.BE)(!1))}),(function(){o("left"),d("")})),v=(0,m.Z)(x,3),b=v[0],w=v[2];return(0,a.useEffect)((function(){return window.emitter.on("extra-settings-item:click",(function(n){d(n.type),o("right")})),window.emitter.on("go-back:click",(function(){o("left"),d("")})),window.emitter.on("popup:resize",(function(){var n=h.current,e=p.current;n&&e&&(n.style.minHeight=e.offsetHeight+"px",n.style.maxHeight=e.offsetHeight+"px")})),function(){window.emitter.un("extra-settings-item:click"),window.emitter.un("item:click"),window.emitter.un("go-back:click")}}),[]),(0,a.useEffect)((function(){window.emitter.emit("popup:resize")}),[r]),(0,f.jsx)(St.Z,{ref:h,active:b,emitCloseName:w,children:(0,f.jsxs)(Ve,{ref:p,className:z()({right:"right"===r}),children:[(0,f.jsxs)($e,{className:z()({hide:"right"===r}),children:[(0,f.jsx)(St.Z.Header,{title:"Settings",closeButton:!0,moreButton:!0}),(0,f.jsxs)(St.Z.Content,{children:[(0,f.jsx)(Ee,{styleAvatar:{height:80,width:80,fontSize:25},styleContainer:{padding:"10px 20px"},avatarPos:"avatar-left",onNicknameClick:function(){return Zt(g||"")},nickname:!0,phone:!0}),(0,f.jsxs)(Ye,{children:[(0,f.jsx)(He.Z,{text:"Edit Profile",leftElement:(0,f.jsx)(Le,{imageName:"edit-profile"}),onClick:function(){return window.emitter.emit("extra-settings-item:click",{type:"edit-profile"})}}),(0,f.jsx)(He.Z,{text:"Chat Settings",leftElement:(0,f.jsx)(Le,{imageName:"chat-settings"}),onClick:function(){return window.emitter.emit("extra-settings-item:click",{type:"chat-settings"})}})]})]})]}),(0,f.jsxs)(Ke,{children:[(0,f.jsx)(St.Z.Header,{title:Pt[u],backEmitName:"go-back:click",closeButton:!0,backButton:!0}),(0,f.jsxs)(St.Z.Content,{bordered:!0,children:[(0,f.jsx)(yt,{hide:"edit-profile"!==u,children:(0,f.jsx)(Je,{})}),(0,f.jsx)(yt,{hide:"chat-settings"!==u,children:(0,f.jsx)(wt,{})})]})]})]})})},Dt=u.ZP.div(le||(le=(0,l.Z)(["\n  position: fixed;\n  pointer-events: none;\n  top: 50%;\n  left: 50%;\n  text-align: center;\n  transform: translate(-50%, -50%);\n  color: #fff;\n  padding: 10px 20px;\n  border-radius: 5px;\n  font-size: ",";\n  background-color: ",";\n  z-index: 10000;\n  opacity: 0;\n  &.show {\n    transition: .5s;\n    opacity: 1;\n  }\n  &.hide {\n    transition: 1s;\n    opacity: 0;\n  }\n"])),(function(n){return n.theme.fontSizes.normal}),(function(n){return(0,Pn.m4)(n.theme.colors.tooltip,.65)})),Tt=function(){var n=(0,a.useState)(""),e=(0,m.Z)(n,2),t=e[0],r=e[1],o=(0,a.useState)(!0),i=(0,m.Z)(o,2),s=i[0],c=i[1];return(0,a.useEffect)((function(){return window.emitter.on("tooltip:show",(function(n){r((null===n||void 0===n?void 0:n.value)||""),setTimeout((function(){return c(!0)}),2e3),setTimeout((function(){return r("")}),3500)})),function(){window.emitter.un("tooltip:show")}}),[]),(0,a.useEffect)((function(){t&&c(!1)}),[t]),(0,f.jsx)(Dt,{className:z()({hide:s,show:!s}),children:t})},Et=u.ZP.div(ue||(ue=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  & > *:first-child {\n    margin-bottom: 20px;\n  }\n"]))),zt=function(){var n=(0,s.C)((function(n){return n.user})),e=n.name,t=n.surname,r=(0,g.Z)(e||"",/^.{0,12}$/),o=(0,m.Z)(r,2),i=o[0],a=o[1],c=(0,g.Z)(t||"",/^.{0,12}$/),l=(0,m.Z)(c,2),u=l[0],d=l[1],h=kt("name"),p=(0,m.Z)(h,3),x=p[0],v=p[2],b=(0,s.T)();return(0,f.jsxs)(St.Z,{width:300,top:120,emitCloseName:v,active:x,onSubmit:function(){i?(b((0,Re.qC)({name:i,surname:u})),b((0,Re.Ee)({name:i,surname:u})).unwrap().then((function(n){return n.length&&window.emitter.emit("tooltip:show",{value:n})})).catch((function(n){return n.length&&window.emitter.emit("tooltip:show",{value:n})})),window.emitter.emit(v)):window.emitter.emit("username:error")},children:[(0,f.jsx)(St.Z.Header,{title:"Edit your name"}),(0,f.jsx)(St.Z.Content,{stylized:!0,children:(0,f.jsxs)(Et,{children:[(0,f.jsx)(Y.Z,{value:i,setValue:a,placeholder:"First name",children:(0,f.jsx)(Y.Z.TextField,{emitErrorName:"username:error"})}),(0,f.jsx)(Y.Z,{value:u,setValue:d,placeholder:"Last Name",children:(0,f.jsx)(Y.Z.TextField,{})})]})}),(0,f.jsx)(St.Z.Footer,{submitTitle:"Save",cancelTitle:"Cancel"})]})},Mt=t(5861),It=t(7757),Ht=t.n(It),Lt=function(){var n=(0,Mt.Z)(Ht().mark((function n(e){var t,r;return Ht().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return",["Choose your username.","neutral"]);case 2:if(!(e.length<5)){n.next=4;break}return n.abrupt("return",["This username is too short.","error"]);case 4:if(/^[a-z_0-9]*$/.test(e)){n.next=6;break}return n.abrupt("return",["Only a-z, 0-9, and underscores allowed.","error"]);case 6:return n.prev=6,n.next=9,fetch("".concat((0,dt.T)(),"/is-available-nickname"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:e})});case 9:return t=n.sent,n.next=12,t.json();case 12:return r=n.sent,n.abrupt("return",r?["This username is available.","success"]:["This username is already occupied","error"]);case 16:return n.prev=16,n.t0=n.catch(6),n.abrupt("return",["Cannot connect to server.","error"]);case 19:case"end":return n.stop()}}),n,null,[[6,16]])})));return function(e){return n.apply(this,arguments)}}(),Ot=Lt,At=u.ZP.div(de||(de=(0,l.Z)(["\n  background-color: ",";\n  padding: 0 ",";\n  p {\n    font-size: ",";\n    padding-bottom: 15px;\n    color: ",";\n    &.error {\n      color: ",";\n    }\n    &.neutral{\n      color: ",";\n    }\n    &.success {\n      color: ",";\n    }\n  }\n"])),(function(n){return n.theme.colors.bgColor}),(function(n){return n.theme.other.popupPaddings}),(function(n){return n.theme.fontSizes.extraSmall}),(function(n){return n.theme.colors.heading}),(function(n){return n.theme.colors.error}),(function(n){return n.theme.colors.paragraph}),(function(n){return n.theme.colors.success})),Bt=function(){var n=kt("nickname"),e=(0,m.Z)(n,3),t=e[0],r=e[2],o=(0,s.C)((function(n){return n.user})).nickname,i=(0,g.Z)(o||"",/^.{0,24}$/),c=(0,m.Z)(i,2),l=c[0],u=c[1],d=(0,a.useState)(""),h=(0,m.Z)(d,2),p=h[0],x=h[1],v=(0,a.useState)(""),b=(0,m.Z)(v,2),w=b[0],j=b[1],Z=(0,s.T)();return(0,a.useEffect)((function(){Ot(l).then((function(n){var e=(0,m.Z)(n,2),t=e[0],r=e[1];x(t),j(r)}))}),[l]),(0,f.jsxs)(St.Z,{top:100,active:t,emitCloseName:r,onSubmit:function(){Ot(l).then((function(n){"success"===(0,m.Z)(n,2)[1]?(Z((0,Re.Gz)({nickname:l})).unwrap().then((function(){return Z((0,Re.EG)(l))})).catch((function(n){return window.emitter.emit("tooltip:show",{value:n})})),window.emitter.emit(r)):window.emitter.emit("nickname-popup:error")}))},children:[(0,f.jsx)(St.Z.Header,{title:"Username"}),(0,f.jsxs)(St.Z.Content,{stylized:!0,children:[(0,f.jsx)(Y.Z,{value:l,setValue:u,placeholder:"@nickname",children:(0,f.jsx)(Y.Z.TextField,{emitErrorName:"nickname-popup:error"})}),(0,f.jsxs)(At,{children:[(0,f.jsx)("p",{className:z()((0,ye.Z)({},w,!0)),children:p}),(0,f.jsx)("p",{children:"You can choose a username on Telegram. If you do, other people will be able to find you by this username and contact you without knowing your phone number."}),(0,f.jsxs)("p",{children:["You can use ",(0,f.jsx)("strong",{children:"a-z, 0-9"})," and ",(0,f.jsx)("strong",{children:"underscores."})]}),(0,f.jsxs)("p",{children:["Minimum Length is ",(0,f.jsx)("strong",{children:"5 characters."})]})]})]}),(0,f.jsx)(St.Z.Footer,{submitTitle:"Save",cancelTitle:"Cancel"})]})},Ft=t(6396),Rt=u.ZP.div(fe||(fe=(0,l.Z)(["\n  position: relative;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  height: 400px;\n  .container {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 10px;\n    display: flex;\n    flex-direction: column;\n    margin-top: auto;\n    padding: 5px 20px;\n    justify-content: flex-start;\n  }\n"]))),Ut=[{text:"Ah, you kids today with techno music! you should enjoy the classics, like Hasselhoff!",createdDate:Date.now(),sender:"user"},{text:"I can't even take you seriously right now.",createdDate:Date.now(),sender:"partner"}],Gt=function(n){var e=n.previewImage,t=(0,s.T)(),r=kt("background-preview",(function(){return window.emitter.emit("background-popup:hide")})),o=(0,m.Z)(r,3),i=o[0],a=o[2];return(0,f.jsxs)(St.Z,{top:70,width:370,emitCloseName:a,active:i,onSubmit:function(){window.storage.set("background-image",e),t((0,c.X9)(e)),window.emitter.emit("background-preview-popup:hide")},children:[(0,f.jsx)(St.Z.Header,{title:"Background preview"}),(0,f.jsx)(St.Z.Content,{children:(0,f.jsx)(Rt,{style:{backgroundImage:"url(".concat(ft(e),")")},children:(0,f.jsxs)("div",{className:"container",children:[(0,f.jsx)(pe,{text:Ut[0].text,sender:Ut[0].sender,isUnreadTooltip:!1,date:Ut[0].createdDate,isDateTooltip:!1,isLastMessageByUser:!0}),(0,f.jsx)(pe,{text:Ut[1].text,sender:Ut[0].sender,isUnreadTooltip:!1,date:Ut[0].createdDate,isDateTooltip:!1,isLastMessageByUser:!0})]})})}),(0,f.jsx)(St.Z.Footer,{submitTitle:"Apply",cancelTitle:"Cancel"})]})},_t=(0,u.ZP)($.X)(he||(he=(0,l.Z)(["\n  display: grid;\n  background-color: ",";\n  padding: 0 10px;\n  grid-template-columns: repeat(3, 1fr);\n  grid-gap: 10px;\n  overflow: auto;\n  max-height: min(450px, 75vh);\n  span {\n    position: relative;\n    height: 180px;\n    &.active-image:before {\n      position: absolute;\n      border: 3px solid #fff;\n      color: #fff;\n      content: '\u2714';\n      text-align: center;\n      width: 30px;\n      height: 30px;\n      bottom: 5px;\n      right: 5px;\n      border-radius: 50%;\n      background-color: ",";\n    }\n  }\n \n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    cursor: pointer;\n  }\n"])),(function(n){return n.theme.colors.bgColor}),(function(n){return n.color})),Xt=function(){var n=kt("background"),e=(0,m.Z)(n,3),t=e[0],r=e[2],o=(0,Ft.Z)("/backgrounds"),i=o.data,c=o.progress,l=(0,s.C)((function(n){return n.settings})),u=l.backgroundImage,d=l.themeColor,h=(0,a.useState)(u),p=(0,m.Z)(h,2),g=p[0],x=p[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(St.Z,{emitCloseName:r,active:t,children:[(0,f.jsx)(St.Z.Header,{title:"Choose your new background"}),(0,f.jsx)(St.Z.Content,{bordered:!0,children:(0,f.jsxs)(_t,{color:d,onClick:function(n){if("IMG"===n.target.tagName){var e=n.target.getAttribute("data-image-name");x(e),ze("background-preview")}},children:["loading"===c&&(0,f.jsx)(R,{infoText:"Searching..."}),"done"===c&&i&&i.map((function(n){return(0,f.jsx)("span",{className:z()({"active-image":u===n}),children:(0,f.jsx)("img",{src:ft(n),"data-image-name":n,alt:n})},n)}))]})}),(0,f.jsx)(St.Z.Footer,{cancelTitle:"Close"})]}),(0,f.jsx)(Gt,{previewImage:g})]})},Vt=u.ZP.div(me||(me=(0,l.Z)(["\n  display: flex;\n  width: ",";\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n"])),(function(n){return n.isPhone?"200vw":"auto"})),Yt=function(){var n=(0,s.C)((function(n){return n.user})).phoneNumber,e=p(),t=Zn("joined"),r=Zn("new message"),o=Zn("user offline"),i=Zn("user online"),c=(0,s.T)();return(0,a.useEffect)((function(){return t.emit(n),r.on((function(n){c((0,v.PL)(n))})),o.on((function(n){var e=n.userPhone,t=n.userLastSeen;c((0,v.xT)({userPhone:e,userLastSeen:t}))})),i.on((function(n){var e=n.userPhone;c((0,v.ti)(e))})),function(){t.off(),r.off(),o.off(),i.off()}}),[]),(0,f.jsxs)(Vt,{isPhone:e,children:[(0,f.jsx)(J,{}),(0,f.jsx)(Ce,{}),(0,f.jsx)(Fe,{}),(0,f.jsx)(Nt,{}),(0,f.jsx)(zt,{}),(0,f.jsx)(Bt,{}),(0,f.jsx)(Xt,{}),(0,f.jsx)(Tt,{})]})}},2118:function(n,e,t){var r={"./calls.png":[1011,11],"./chat-settings.png":[5840,840],"./contacts.png":[1854,854],"./edit-profile.png":[113,113],"./group.png":[8559,559],"./name.png":[4525,525],"./nickname.png":[152,152],"./night-mode.png":[3251,251],"./report.png":[7616,616],"./saved-messages.png":[2442,442],"./settings.png":[360,360]};function o(n){if(!t.o(r,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[n],o=e[0];return t.e(e[1]).then((function(){return t.t(o,17)}))}o.keys=function(){return Object.keys(r)},o.id=2118,n.exports=o}}]);
//# sourceMappingURL=262.e7c1eabc.chunk.js.map